(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{21:function(e,t,a){},28:function(e,t,a){},37:function(e,t,a){e.exports=a(92)},89:function(e,t,a){},92:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(35),c=a.n(r),i=a(94),o=a(98),s=a(97),u=a(3),d=a(4),m=a(6),h=a(5),p=a(7),v=(a(21),function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("div",{className:"start"},l.a.createElement("h1",{className:"name"},"AHunt"),l.a.createElement("div",{className:"row options"},l.a.createElement("div",{className:"col-lg-4"}),l.a.createElement("div",{className:"col-lg-2"},l.a.createElement("a",{href:"/login"},l.a.createElement("div",{class:"card rounded"},l.a.createElement("div",{class:"card-body card-button"},l.a.createElement("h3",null,"Creator"))))),l.a.createElement("div",{className:"col-lg-2"},l.a.createElement("a",{href:"/participant"},l.a.createElement("div",{class:"card rounded"},l.a.createElement("div",{class:"card-body card-button"},l.a.createElement("h3",null,"Join Hunt"))))),l.a.createElement("div",{className:"col-lg-4"}))),l.a.createElement("div",{className:"info"},l.a.createElement("div",{class:"card rounded"},l.a.createElement("div",{class:"card-body "},l.a.createElement("h4",{class:"card-title"},"What is AHunt about?"),l.a.createElement("p",{class:"card-text"},"The purpose of AHunt is to aid scavengar hunts.",l.a.createElement("br",null),"Users will gather in one area and will be given an initial \u201chint\u201d as to where the first part of the scavenger hunt will take place. Each of the notable sites will have strategic QR Codes placed around the area. A hint to the next step of the scavenger hunt will be given if that the user is able to find each location of and scan the previous QR Codes. Users will be put against the clock to find all the items over a specific interval of time. Included in the application is a page where anyone can create and host a scavenger hunt with their own hints and items to be found. The creator of the hunt can specify how much time is given and what prizes, if any, will be given to the competitors who finish before the time is up. How difficult or quick the hunt may be is solely up to the creator. This range of freedom will allow any individual to participate and create any scavenger hunt of their choosing. Essentially, our purpose to get people to discover just how much their environment has to offer."))),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",{class:"card rounded"},l.a.createElement("div",{class:"card-body"},l.a.createElement("h4",{class:"card-title"},"How to use AHunt?"),l.a.createElement("h5",{id:"creating-and-getting-qr-codes"},"Creating and Getting QR Codes"),l.a.createElement("ul",null,l.a.createElement("li",null,"If there is no active hunt or if you select ",l.a.createElement("strong",null,"New Hunt"),", then you'll be given the option to create a new Scavengar Hunt"),l.a.createElement("li",null,"Enter the Name and Description of the Hunt to move on to the creation of Steps"),l.a.createElement("li",null,"Enter the info you want in the steps (image is optional) and use ",l.a.createElement("strong",null,"Add Step")," to create a new step for the Hunt"),l.a.createElement("li",null,l.a.createElement("ul",null,l.a.createElement("li",null,"Once done, click the ",l.a.createElement("strong",null,"End Add")," Button"))),l.a.createElement("li",null,"To get your QR Codes for the steps and see your saved hunts, go to ",l.a.createElement("strong",null,"Scavengar Hunts"))),l.a.createElement("h5",{id:"initiating-and-starting-a-hunt"},"Initiating and Starting a Hunt"),l.a.createElement("ul",null,l.a.createElement("li",null,"Click ",l.a.createElement("strong",null,"Initiate")," to initiate a hunt"),l.a.createElement("li",null,"Give the code to people who you want in the hunt"),l.a.createElement("li",null,l.a.createElement("ul",null,l.a.createElement("li",null,"Wait for people to join after you ",l.a.createElement("strong",null,"Initiate")))),l.a.createElement("li",null,l.a.createElement("strong",null,"Start")," once you think everyone you want has joined"),l.a.createElement("li",null,"You won't see participants on the home until a participant has scaned a code"))))))}}]),t}(l.a.Component)),f=a(10),b=a(96),g=a(24),E=a.n(g);a(93),a(47),a(49);E.a.initializeApp({apiKey:"AIzaSyC_rKDik_dLNWno88FbJm79QrxZp4EyZvA",authDomain:"kahunt-218617.firebaseapp.com",databaseURL:"https://kahunt-218617.firebaseio.com",projectId:"kahunt-218617",storageBucket:"kahunt-218617.appspot.com",messagingSenderId:"81769943797"});var y=E.a,C=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={name:"",email:"",password:"",registrationFail:!1,registrationFailMessage:null,registrationSuccess:!1},a.handleChange=function(e){a.setState(Object(f.a)({},e.target.name,e.target.value))},a.registerWithFirebase=function(){var e=a.state,t=e.email,n=e.password;y.auth().createUserWithEmailAndPassword(t.trim(),n).then(function(e){a.state.name,a.state.email,e.user.uid;a.addDisplayName(e.user.uid),a.setState({creatingAccount:!1,accountCreated:!0})}).catch(function(e){a.setState({creatingAccount:!1,creatingAccountError:!0});var t=e.code,n=e.message;console.log(t,n)})},a.addDisplayName=function(e){var t=a.state.name;y.auth().currentUser.updateProfile({displayName:t}).then(function(){a.addNameToDatabase(e,t)}).catch(function(e){a.setState({registrationFail:!0,registrationFailMessage:"unable to add display name"}),console.log("display name add failed",e)})},a.addNameToDatabase=function(e,t){y.database().ref("users").child(e).child("credentials").update({name:t}).then(function(){return a.setState({registrationSuccess:!0})}).catch(function(e){console.log("unable to add name to database",e),a.setState({creatingAccount:!1,creatingAccountError:!0})})},a.checkIfSignedIn=function(){y.auth().onAuthStateChanged(function(e){e&&e.displayName&&a.setState({registrationSuccess:!0})})},a.componentDidMount=function(){a.checkIfSignedIn()},a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.name,n=t.email,r=t.password;return t.registrationSuccess?l.a.createElement(b.a,{push:!0,to:"/dashboard"}):l.a.createElement("div",null,l.a.createElement("h1",{className:"name"},"AHunt"),l.a.createElement("div",{className:"row",style:{paddingTop:"3%"}},l.a.createElement("div",{className:"col-md-4"}),l.a.createElement("div",{className:"col-md-4"},l.a.createElement("div",{className:"card rounded"},l.a.createElement("div",{className:"card-body"},l.a.createElement("form",null,l.a.createElement("div",{class:"form-group"},l.a.createElement("label",{for:"name"},"Full Name"),l.a.createElement("input",{type:"text",class:"form-control",name:"name",value:a,placeholder:"Enter full name",onChange:function(t){return e.handleChange(t)}})),l.a.createElement("div",{class:"form-group"},l.a.createElement("label",{for:"email"},"Email address"),l.a.createElement("input",{type:"email",class:"form-control",name:"email",value:n,"aria-describedby":"emailHelp",placeholder:"Enter email",onChange:function(t){return e.handleChange(t)}}),l.a.createElement("small",{id:"emailHelp",class:"form-text text-muted"},"We'll never share your email with anyone else.")),l.a.createElement("div",{class:"form-group"},l.a.createElement("label",{for:"password"},"Password"),l.a.createElement("input",{type:"password",class:"form-control",name:"password",value:r,placeholder:"Password",onChange:function(t){return e.handleChange(t)}})),l.a.createElement("button",{type:"button",value:"Log In",className:"btn btn-primary rounded",onClick:this.registerWithFirebase},"Register"))))),l.a.createElement("div",{className:"col-md-4"})))}}]),t}(l.a.Component),S=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={email:"",password:"",loading:!1,authenticationFail:!1,authenticationFailMessage:null,authenticationSuccess:!1},a.handleChange=function(e){a.setState(Object(f.a)({},e.target.name,e.target.value))},a.handleKeyPress=function(e){13===e.charCode&&(e.preventDefault(),a.authenticateWithFirebase())},a.authenticateWithFirebase=function(){a.setState({authenticationFail:!1,loading:!0}),a.state.email&&a.state.password?y.auth().signInWithEmailAndPassword(a.state.email,a.state.password).then(function(e){localStorage.setItem("currentUserData",JSON.stringify(e.user)),a.setState({authenticationSuccess:!0,loading:!1})}).catch(function(e){var t,n=e.code;t="auth/wrong-password"===n?"Password is incorrect":"auth/invalid-email"===n?"Invalid email":"auth/user-not-found"===n?"This account does not exist":e.message,a.setState({authenticationFail:!0,authenticationFailMessage:t,loading:!1})}):a.setState({authenticationFail:!0,authenticationFailMessage:"Fields cannot be left empty",loading:!1})},a.checkIfSignedIn=function(){y.auth().onAuthStateChanged(function(e){e&&a.setState({authenticationSuccess:!0})})},a.componentDidMount=function(){a.checkIfSignedIn()},a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.email,n=t.password;return t.authenticationSuccess?l.a.createElement(b.a,{push:!0,to:"/dashboard"}):l.a.createElement("div",null,l.a.createElement("h1",{className:"name"},"AHunt"),l.a.createElement("div",{className:"row",style:{paddingTop:"3%"}},l.a.createElement("div",{className:"col-md-4"}),l.a.createElement("div",{className:"col-md-4"},l.a.createElement("div",{className:"card rounded"},l.a.createElement("div",{className:"card-body"},l.a.createElement("form",null,l.a.createElement("div",{class:"form-group"},l.a.createElement("label",{for:"email"},"Email address"),l.a.createElement("input",{type:"email",class:"form-control",name:"email",value:a,"aria-describedby":"emailHelp",placeholder:"Enter email",onChange:function(t){return e.handleChange(t)},onKeyPress:this.handleKeyPress}),l.a.createElement("small",{id:"emailHelp",class:"form-text text-muted"},"We'll never share your email with anyone else.")),l.a.createElement("div",{class:"form-group"},l.a.createElement("label",{for:"password"},"Password"),l.a.createElement("input",{type:"password",class:"form-control",name:"password",value:n,placeholder:"Password",onChange:function(t){return e.handleChange(t)},onKeyPress:this.handleKeyPress})),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-sm-2"},l.a.createElement("button",{type:"button",value:"Log In",className:"btn btn-primary rounded",onClick:this.authenticateWithFirebase},"Login")),l.a.createElement("div",{className:"col-sm-2"},l.a.createElement("button",{type:"button",value:"Redirect To Register",className:"btn btn-success rounded"},"Register"))))))),l.a.createElement("div",{className:"col-md-4"})))}}]),t}(l.a.Component),O=(a(28),function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={participants:null,participantsLoaded:!1},a.fetchParticipants=function(){console.log(a.props.uid,a.props.activeHuntId),a.props.uid&&a.props.activeHuntId&&y.database().ref("users").child(a.props.uid).child("hunts/saved").child(a.props.activeHuntId).on("value",function(e){console.log(e.val()),a.setState({participants:e.child("participants").val(),participantsLoaded:!0,steps:e.child("steps").val()})})},a.componentDidMount=function(){a.fetchParticipants()},a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.state,t=e.displayName,a=e.participants,n=e.participantsLoaded,r=e.steps;return l.a.createElement("div",{style:{paddingTop:"2%"}},l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"jumbotron"},l.a.createElement("h1",null,"Hello ",t),l.a.createElement("br",null),n&&l.a.createElement("div",null,l.a.createElement("h3",null,"Participants: ",Object.keys(a).length),Object.keys(a).map(function(e){return l.a.createElement("div",{key:a[e].id},l.a.createElement("div",{style:{paddingLeft:"1%",paddingTop:"1%"}},a[e].name,":",l.a.createElement("br",null),l.a.createElement("p",{style:{paddingLeft:"1%"}},"Current Step: ",a[e].current_step_count," ",a[e].current_step_title),a[e].current_step_count===Object.keys(r).length&&l.a.createElement("div",{class:"progress"},l.a.createElement("div",{class:"progress-bar bg-success",role:"progressbar",style:{width:"100%",ariaValuenow:40,ariaValuemin:0,ariaValuemax:100}})),a[e].current_step_count!==Object.keys(r).length&&l.a.createElement("div",{class:"progress"},l.a.createElement("div",{class:"progress-bar progress-bar-striped progress-bar-animated",role:"progressbar",style:{width:1e3*a[e].current_step_count/Object.keys(r).length,ariaValuenow:40,ariaValuemin:0,ariaValuemax:100}}))))})))))}}]),t}(l.a.Component)),j=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).signOutWithFirebase=function(){y.auth().signOut().then(function(){console.log("signed out successfully"),a.setState({signedOut:!0})}).catch(function(){return console.log("failed to sign out")})},a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.changeActiveMenu,a=e.activeMenu,n=e.activeHunt;return l.a.createElement("nav",{class:"navbar navbar-expand-lg navbar-light bg-light"},l.a.createElement("a",{class:"navbar-brand",href:"/"},"AHunt"),l.a.createElement("button",{class:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarColor03","aria-controls":"navbarColor03","aria-expanded":"false","aria-label":"Toggle navigation"},l.a.createElement("span",{class:"navbar-toggler-icon"})),l.a.createElement("div",{class:"collapse navbar-collapse",id:"navbarColor03"},l.a.createElement("ul",{class:"navbar-nav mr-auto"},l.a.createElement("li",{class:"nav-item"},l.a.createElement("a",{class:"activeHunt"===a||"noActiveMenu"===a?"nav-link active":"nav-link",onClick:function(){return t(n?"activeHunt":"noActiveHunt")}},"Home",l.a.createElement("span",{class:"sr-only"},"(current)"))),l.a.createElement("li",{class:"nav-item"},l.a.createElement("a",{class:"hunts"===a?"nav-link active":"nav-link",onClick:function(){return t("hunts")}},"Scavengar Hunts")),l.a.createElement("li",{class:"nav-item"},l.a.createElement("a",{class:"newHunt"===a||"newSteps"===a?"nav-link active":"nav-link",onClick:function(){return t("newHunt")}},"New Hunt")),l.a.createElement("li",{class:"nav-item"},l.a.createElement("a",{class:"settings"===a?"nav-link active":"nav-link",onClick:function(){return t("settings")}},"Settings")))),l.a.createElement("button",{class:"btn btn-secondary my-2 my-sm-0",onClick:this.signOutWithFirebase},"Sign Out"))}}]),t}(l.a.Component),k=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.stepName,a=e.stepHint,n=e.stepFeedback,r=e.imageUrl;return l.a.createElement("div",null,l.a.createElement("h4",null,"Name: ",t),l.a.createElement("p",null,"Hint: ",a),l.a.createElement("small",null,"Feedback: ",n),null!=r&&l.a.createElement("img",{src:r,alt:"Step Image"}))}}]),t}(l.a.Component),N=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={finishedSteps:null},a.fetchSteps=function(){var e=a.props,t=e.uid,n=e.huntID;t&&n&&y.database().ref("users").child(t).child("hunts").child("saved").child(n).child("steps").on("value",function(e){a.setState({finishedSteps:e.val()})})},a.componentDidMount=function(){a.fetchSteps()},a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.state.finishedSteps;return l.a.createElement("div",{style:{paddingTop:"2%"}},l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"jumbotron"},null!=e&&Object.keys(e).map(function(t,a){return l.a.createElement("div",null,l.a.createElement(k,{key:a,stepName:e[t].title,stepHint:e[t].hint,image:e[t].image?e[t].image.url:null,stepFeedback:e[t].feedback}),l.a.createElement("br",null))}))))}}]),t}(l.a.Component),w=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={stepName:"",stepHint:"",stepImage:null,stepFeedback:"",order:1,qrCode:""},a.submitStep=function(){var e=a.state,t=e.stepName,n=e.stepHint,l=(e.stepImage,e.stepFeedback),r=e.order,c=(e.qrCode,a.props),i=c.uid,o=c.huntID;console.log(i,o);var s=y.database().ref("users").child(i).child("hunts").child("saved").child(o).child("steps"),u=s.push().key;s.child(u).set({title:t,hint:n,feedback:l,id:u,order:r,qr_code:"http://api.qrserver.com/v1/create-qr-code/?data="+u+"&size=500x500"}).then(function(){console.log("Step Created"),a.setState({stepName:"",stepHint:"",stepImage:null,stepFeedback:"",order:a.state.order+1,uid:null})}).catch(function(e){console.log(e)})},a.handleChange=function(e){a.setState(Object(f.a)({},e.target.name,e.target.value))},a.componentDidMount=function(){},a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.stepName,n=t.stepHint,r=t.stepFeedback;return l.a.createElement("div",{style:{paddingTop:"2%"}},l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"jumbotron"},l.a.createElement("form",null,l.a.createElement("fieldset",null,l.a.createElement("legend",null,"Create Step"),l.a.createElement("div",{class:"form-group row"},l.a.createElement("label",{for:"stepName",class:"col-sm-2 col-form-label"},"Name"),l.a.createElement("div",{class:"col-sm-10"},l.a.createElement("input",{type:"text",class:"form-control",name:"stepName",value:a,onChange:function(t){return e.handleChange(t)},placeholder:"Step Name"}))),l.a.createElement("div",{class:"form-group row"},l.a.createElement("label",{for:"hint",class:"col-sm-2 col-form-label"},"Hint"),l.a.createElement("div",{class:"col-sm-10"},l.a.createElement("textarea",{class:"form-control",name:"stepHint",value:n,onChange:function(t){return e.handleChange(t)},placeholder:"Step Hint",rows:"3"}))),l.a.createElement("div",{class:"form-group"},l.a.createElement("input",{type:"file",class:"form-control-file",name:"stepImage","aria-describedby":"fileHelp"}),l.a.createElement("small",{id:"fileHelp",class:"form-text text-muted"},"Image for the step")),l.a.createElement("div",{class:"form-group row"},l.a.createElement("label",{for:"feedback",class:"col-sm-2 col-form-label"},"Feedback"),l.a.createElement("div",{class:"col-sm-10"},l.a.createElement("input",{type:"text",class:"form-control",name:"stepFeedback",value:r,onChange:function(t){return e.handleChange(t)},placeholder:"Passed Step Feedback"}))),l.a.createElement("button",{type:"button",class:"btn btn-primary",onClick:this.submitStep},"Add Step"),l.a.createElement("button",{type:"button",class:"btn btn-warning",onClick:function(){return e.props.changeActiveMenu("hunts")}},"End And"))),l.a.createElement("br",null),l.a.createElement("br",null))))}}]),t}(l.a.Component),I=a(18),H=a.n(I),A=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.stepName,a=e.qrCode;return l.a.createElement("div",null,l.a.createElement("a",{href:a,target:"_blank"},l.a.createElement("span",null,"QR for Step - ",t," "," ")))}}]),t}(l.a.Component),D=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={QR:null},a.fetchSteps=function(){var e=a.props,t=e.uid,n=e.huntID;t&&n&&y.database().ref("users").child(t).child("hunts").child("saved").child(n).child("steps").on("value",function(e){a.setState({QR:e.val()})})},a.componentDidMount=function(){a.fetchSteps()},a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.state.QR;return l.a.createElement("div",{style:{paddingTop:"2%"}},l.a.createElement("div",{className:"container"},l.a.createElement("div",null,null!=e&&Object.keys(e).map(function(t,a){return l.a.createElement(A,{key:a,stepName:e[t].title,qrCode:e[t].qr_code})}))))}}]),t}(l.a.Component),F=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={checkingCode:!1,code:null,status:null,buttonAction:"Initiate"},a.initiateHunt=function(e,t){a.setState({checkingCode:!0,code:null,buttonAction:"..."}),console.log(e,t),H.a.get("https://us-central1-kahunt-218617.cloudfunctions.net/startHunt",{params:{uid:e,hunt_id:t}}).then(function(e){e.data?(console.log(e.data),a.setState({code:e.data,checkingCode:!1,buttonAction:"Start"})):a.setState({checkingCode:!1})}).catch(function(e){a.setState({isCodeValid:!0,checkingCode:!1}),console.log("unable to check code",e)})},a.buttonHandler=function(){var e=a.state,t=e.status;e.code;t&&"ended"!==t||a.initiateHunt(a.props.uid,a.props.huntId),"initiated"===t&&a.onStartClickHandler(),"started"===t&&a.onEndClickHandler()},a.onStartClickHandler=function(){y.database().ref("users").child(a.props.uid).child("hunts/active").update({status:"started"}).then(function(){return a.setState({buttonAction:"End"})})},a.onEndClickHandler=function(){y.database().ref("users").child(a.props.uid).child("hunts/active").update({status:"ended"}).then(function(){return a.setState({buttonAction:"Initiate"})})},a.fetchCodeAndStatus=function(){y.database().ref("users").child(a.props.uid).child("hunts/active").on("value",function(e){if(console.log(e.child("hunt_id").val(),a.props.huntId),e.child("hunt_id").val()===a.props.huntId){var t,n=e.child("status").val();n&&"ended"!==n||(t="Initiate"),"initiated"===n&&(t="Start"),"started"===n&&(t="End"),a.setState({status:n,code:e.child("hunt_code").val(),buttonAction:t})}})},a.componentDidMount=function(){a.fetchCodeAndStatus()},a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.huntName,a=e.huntDes,n=e.uid,r=e.huntId,c=this.state,i=c.checkingCode,o=c.code,s=c.buttonAction;return l.a.createElement("div",{className:"container"},l.a.createElement("div",{style:{paddingTop:"2%",color:"white"}},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-1"}),l.a.createElement("div",{className:"col-md-8"},l.a.createElement("h3",null,t),l.a.createElement("p",null,a),l.a.createElement(D,{uid:n,huntID:r})),o&&l.a.createElement("div",null,"Code: ",o),l.a.createElement("div",{className:"col-md-2"},l.a.createElement("button",{type:"button",class:"btn btn-success",onClick:this.buttonHandler},s),i&&l.a.createElement("div",null,"Initiating")),l.a.createElement("div",{className:"col-md-1"}))))}}]),t}(l.a.Component),M=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={savedHunts:null,uid:null},a.fetchHunts=function(){var e=a.props.uid;e&&y.database().ref("users").child(e).child("hunts").child("saved").on("value",function(e){console.log(e.val()),a.setState({savedHunts:e.val()})})},a.componentDidMount=function(){a.fetchHunts()},a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.state.savedHunts,t=this.props.uid;return l.a.createElement("div",{style:{paddingTop:"2%"}},null!=e&&Object.keys(e).map(function(a,n){return l.a.createElement(F,{key:n,huntId:e[a].id,huntName:e[a].hunt_name,huntDes:e[a].hunt_description,uid:t})}))}}]),t}(l.a.Component),x=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={signedOut:!1,activeHunt:!1,activeMenu:"newHunt",uid:null,displayName:null,huntID:null,huntName:"",huntDes:"",huntCreated:!1,huntCreationFail:!1},a.signOutWithFirebase=function(){y.auth().signOut().then(function(){console.log("signed out successfully"),a.setState({signedOut:!0})}).catch(function(){return console.log("failed to sign out")})},a.checkIfSignedIn=function(){y.auth().onAuthStateChanged(function(e){e?a.setState({uid:e.uid,displayName:e.displayName},function(){return a.checkIfActiveHunt()}):a.setState({signedOut:!0})})},a.checkIfActiveHunt=function(){console.log(a.state.uid),y.database().ref("users").child(a.state.uid).child("hunts").child("active").once("value").then(function(e){console.log(e.val()),!e.exists()||"ended"==e.child("status").val()&&e.child("status").val()||a.setState({activeHuntId:e.child("hunt_id").val(),activeHunt:!0,activeMenu:"activeHunt"})})},a.changeToCreatingSteps=function(){a.setState({activeMenu:"newSteps"})},a.setHuntId=function(e){a.setState({huntID:e})},a.handleChange=function(e){a.setState(Object(f.a)({},e.target.name,e.target.value))},a.submitForm=function(){var e=a.state,t=e.uid,n=e.huntName,l=e.huntDes,r=y.database().ref("users").child(t).child("hunts").child("saved"),c=r.push().key;r.child(c).set({hunt_name:n,hunt_description:l,id:c}).then(function(){a.setState({huntCreated:!0,huntID:c,activeMenu:"newSteps"})}).catch(function(e){console.log(e),a.setState({huntCreationFail:!0})})},a.componentDidMount=function(){a.checkIfSignedIn()},a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.uid,n=t.displayName,r=t.activeHuntId,c=t.signedOut,i=t.activeMenu,o=t.huntID,s=t.activeHunt,u=t.huntName,d=t.huntDes;return c?l.a.createElement(b.a,{push:!0,to:"/"}):l.a.createElement("div",null,l.a.createElement(j,{activeMenu:i,activeHunt:s,changeActiveMenu:function(t){return e.setState({activeMenu:t})}}),"activeHunt"==this.state.activeMenu&&a&&l.a.createElement(O,{uid:a,displayName:n,activeHuntId:r}),"hunts"==this.state.activeMenu&&l.a.createElement(M,{uid:a}),("newHunt"===this.state.activeMenu||"noActiveHunt"===this.state.activeMenu||!this.state.activeHunt&&"activeHunt"===this.state.activeMenu)&&l.a.createElement("div",{style:{paddingTop:"2%"}},l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"jumbotron"},l.a.createElement("form",null,l.a.createElement("fieldset",null,l.a.createElement("legend",null,"Create Hunt"),l.a.createElement("div",{class:"form-group row"},l.a.createElement("label",{for:"huntName",class:"col-sm-2 col-form-label"},"Hunt Name"),l.a.createElement("div",{class:"col-sm-10"},l.a.createElement("input",{type:"text",class:"form-control",value:u,name:"huntName",onChange:function(t){return e.handleChange(t)},placeholder:"Step Name"}))),l.a.createElement("div",{class:"form-group row"},l.a.createElement("label",{for:"description",class:"col-sm-2 col-form-label"},"Description"),l.a.createElement("div",{class:"col-sm-10"},l.a.createElement("textarea",{class:"form-control",value:d,name:"huntDes",onChange:function(t){return e.handleChange(t)},placeholder:"Hunt Description",rows:"3"}))),l.a.createElement("button",{type:"button",class:"btn btn-primary",onClick:this.submitForm},"Submit"))),l.a.createElement("br",null),l.a.createElement("br",null)))),"newSteps"===this.state.activeMenu&&o&&l.a.createElement("div",null,l.a.createElement(w,{huntID:o,uid:a,changeActiveMenu:function(t){return e.setState({activeMenu:t})}}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(N,{huntID:o,uid:a})))}}]),t}(l.a.Component),_=l.a.createContext(),T=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={isCodeValid:!1,checkingCode:!1,huntCreatorId:null,huntCreatorName:null,huntId:null,huntName:null,huntDescription:null,huntSteps:null,huntStatus:null,qrReadError:!1,stepId:null,stepContent:null,stepContentLoaded:!1,stepContentLoading:!1,participantId:null,participantName:null,deletedStorageDataAfterEnded:!1,inDeleteCountdownSequence:!1},a.submitCode=function(e){a.setState({checkingCode:!0}),console.log(e),H.a.get("https://us-central1-kahunt-218617.cloudfunctions.net/checkCode",{params:{code:e}}).then(function(t){t.data?(console.log(t.data),a.setState({huntCreatorId:t.data.huntCreatorId,huntCreatorName:t.data.huntCreatorName,huntId:t.data.huntId,huntName:t.data.huntName,huntDescription:t.data.huntDescription,huntSteps:t.data.huntSteps,isCodeValid:!0,checkingCode:!1}),localStorage.setItem("huntCode",e),a.fetchHuntStatus()):a.setState({isCodeValid:!1,checkingCode:!1})}).catch(function(e){a.setState({isCodeValid:!0,checkingCode:!1}),console.log("unable to check code",e)})},a.fetchHuntStatus=function(){console.log(a.state.huntCreatorId),y.database().ref("users").child(a.state.huntCreatorId).child("hunts").child("active/status").on("value",function(e){a.setState({huntStatus:e.val()})})},a.handleQrData=function(e){if(e){console.log(e);a.state.previousStepId;a.setState({stepId:e},function(){return a.fetchStepContent()})}else console.log("stepId is null")},a.addName=function(e){var t=a.state,n=t.huntCreatorId,l=t.huntId;t.stepId;if(a.state.participantId)y.database().ref("users").child(n).child("hunts").child("saved").child(l).child("participants").child(a.state.participantId).update({name:e}).then(function(){localStorage.setItem("participantName",e),a.setState({participantName:e})});else{var r=a.state,c=r.huntCreatorId,i=r.huntId,o=(r.stepId,y.database().ref("users").child(c).child("hunts").child("saved").child(i).child("participants")),s=o.push().key;o.child(s).update({id:s,name:e}).then(function(){localStorage.setItem("participantId",s),a.setState({participantName:e,participantId:s})}).catch(function(e){console.log("unable to create name and id",e)})}},a.updateProgress=function(){var e=a.state,t=e.participantId,n=e.stepContent,l=e.stepId,r=e.huntCreatorId,c=e.huntId;y.database().ref("users").child(r).child("hunts").child("saved").child(c).child("participants").child(t).update({current_step_order:n.order,current_step_id:l,current_step_title:n.title}).then(function(){return a.updateCompletedCount()}).catch(function(e){return console.log(e)})},a.updateCompletedCount=function(){var e=a.state,t=e.participantId,n=(e.stepContent,e.stepId),l=e.huntCreatorId,r=e.huntId;y.database().ref("users").child(l).child("hunts").child("saved").child(r).child("steps").child(n).child("completed").update(Object(f.a)({},t,!0)).catch(function(e){return console.log(e)})},a.handleQrReadError=function(e){a.setState({qrReadError:!0})},a.fetchStepContent=function(){a.setState({stepContentLoading:!0});var e=a.state,t=e.huntCreatorId,n=e.huntId,l=e.stepId;y.database().ref("users").child(t).child("hunts").child("saved").child(n).child("steps").child(l).once("value").then(function(e){console.log(e.val()),a.setState({stepContent:e.val(),stepContentLoaded:!0,stepContentLoading:!1},function(){return a.updateProgress()})})},a.onContinueHunt=function(){a.setState({stepId:null,stepContent:null,stepContentLoaded:!1,stepContentLoading:!1})},a.componentDidMount=function(){var e=localStorage.getItem("huntCode"),t=localStorage.getItem("participantId"),n=localStorage.getItem("participantName");e&&a.submitCode(e),t&&a.setState({participantId:t}),n&&a.setState({participantName:n})},a.componentDidUpdate=function(){var e=a.state,t=e.deletedStorageDataAfterEnded,n=e.huntStatus,l=e.inDeleteCountdownSequence;"ended"!==n||t||l||(a.setState({inDeleteCountdownSequence:!0}),setTimeout(function(){localStorage.removeItem("huntCode"),localStorage.removeItem("participantId"),localStorage.removeItem("participantName"),localStorage.removeItem("currentUserData"),a.setState({deletedStorageDataAfterEnded:!0})},5e3))},a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement(_.Provider,{value:{state:this.state,submitCode:function(t){return e.submitCode(t)},handleQrData:function(t){return e.handleQrData(t)},handleQrReadError:function(t){return e.handleQrReadError(t)},onContinueHunt:function(){return e.onContinueHunt()},addName:function(t){return e.addName(t)}}},this.props.children)}}]),t}(l.a.Component),P=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={code:""},a.handleChange=function(e){a.setState(Object(f.a)({},e.target.name,e.target.value))},a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.state.code;return l.a.createElement(_.Consumer,null,function(a){var n=a.submitCode,r=a.state.isCodeValid;return l.a.createElement("div",{className:"container"},l.a.createElement("h1",{className:"name"},"AHunt"),l.a.createElement("br",null),l.a.createElement("div",{style:{padding:"2%",paddingTop:"5%"}},(!t||""!==t)&&!r&&l.a.createElement("div",null,"Invalid Code. Try Again"),l.a.createElement("div",{class:"form-group"},l.a.createElement("label",{for:"name",style:{color:"white"}},"Enter Code"),l.a.createElement("input",{type:"text",class:"form-control rounded",name:"code",value:t,placeholder:"Code",onChange:function(t){return e.handleChange(t)}})),l.a.createElement("button",{disabled:!t||""===t,onClick:function(){return n(t)},class:"btn btn-primary rounded"},"Join")))})}}]),t}(l.a.Component),L=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={name:""},a.handleChange=function(e){a.setState(Object(f.a)({},e.target.name,e.target.value))},a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement(_.Consumer,null,function(t){var a=t.state,n=a.huntCreatorName,r=a.huntName,c=a.huntSteps,i=a.participantName,o=t.addName,s=e.state.name;return l.a.createElement("div",{className:"container",style:{color:"white"}},l.a.createElement("h1",{className:"name"},"AHunt"),l.a.createElement("br",null),l.a.createElement("div",{style:{padding:"2%",paddingTop:"5%"}},l.a.createElement("div",null,"Hunt ",r),l.a.createElement("label",null,"By ",n),l.a.createElement("div",null,"Number of Steps: ",c),l.a.createElement("br",null),i?l.a.createElement("div",null,i):l.a.createElement("div",null,l.a.createElement("div",{class:"form-group"},l.a.createElement("label",{for:"name",style:{color:"white"}},"Name"),l.a.createElement("input",{type:"text",class:"form-control rounded",name:"name",value:s,placeholder:"Name",onChange:function(t){return e.handleChange(t)},onKeyPress:e.handleKeyPress})),l.a.createElement("button",{onClick:function(){return o(s)},class:"btn btn-primary rounded"},"Enter")),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",null,"Waiting to Start...")))})}}]),t}(l.a.Component),R=a(36),Q=a.n(R),W=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={delay:300},a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.state.delay;return l.a.createElement(_.Consumer,null,function(t){var a=t.handleQrData,n=t.handleQrReadError;return l.a.createElement("div",null,l.a.createElement("h1",{className:"name"},"AHunt"),l.a.createElement("br",null),l.a.createElement("div",{className:"container"},l.a.createElement("div",{style:{padding:"2%",paddingTop:"5%"}})),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("h4",{style:{color:"white",textAlign:"center"}},"Scan QR"),l.a.createElement("div",{className:"jumbotron"},l.a.createElement(Q.a,{delay:e,onError:function(e){return n(e)},onScan:function(e){return a(e)},style:{width:"100%"}})),l.a.createElement("h4",{style:{color:"white",textAlign:"center"}},"To get hint for the next location"))})}}]),t}(l.a.Component),q=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={},a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(_.Consumer,null,function(e){var t=e.state,a=t.stepContent,n=t.stepContentLoaded,r=t.stepContentLoading,c=t.huntSteps,i=e.onContinueHunt;return l.a.createElement("div",null,l.a.createElement("h1",{className:"name"},"AHunt"),l.a.createElement("br",null),l.a.createElement("div",{className:"container"},l.a.createElement("div",{style:{padding:"2%",paddingTop:"5%",color:"white"}},r&&l.a.createElement("div",null,"Loading..."),n&&l.a.createElement("div",null,l.a.createElement("h4",null,a.title),l.a.createElement("div",null,a.feedback),l.a.createElement("img",{src:a.image?a.image.url:null}),l.a.createElement("div",null,"Step #: ",a.order),l.a.createElement("div",null,"People Who completed: ",a.completed?Object.keys(a.completed).length:0),l.a.createElement("br",null),l.a.createElement("br",null),a.order!==c&&l.a.createElement("button",{onClick:i,class:"btn btn-primary rounded"},"Continue Hunt")))))})}}]),t}(l.a.Component),V=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={},a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(_.Consumer,null,function(e){return l.a.createElement("div",null,l.a.createElement("h1",{className:"name"},"AHunt"),l.a.createElement("br",null),l.a.createElement("div",{className:"container"},l.a.createElement("h5",null,"Congratulations!! You completed the Hunt!"),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("h3",null,"Thank you for Playing"),l.a.createElement("a",{href:"/"})))})}}]),t}(l.a.Component),K=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(_.Consumer,null,function(e){var t=e.state,a=t.isCodeValid,n=t.huntStatus,r=t.stepId;return l.a.createElement("div",null,!a&&l.a.createElement(P,null),a&&"initiated"===n&&l.a.createElement(L,null),a&&"started"===n&&!r&&l.a.createElement(W,null),a&&"started"===n&&r&&l.a.createElement(q,null),a&&"ended"===n&&r&&l.a.createElement(V,null))})}}]),t}(l.a.Component),U=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(T,null,l.a.createElement(K,null))}}]),t}(l.a.Component),J=(a(89),function(){return l.a.createElement(i.a,null,l.a.createElement(o.a,null,l.a.createElement(s.a,{path:"/",exact:!0,component:v}),l.a.createElement(s.a,{path:"/login",exact:!0,component:S}),l.a.createElement(s.a,{path:"/register",exact:!0,component:C}),l.a.createElement(s.a,{path:"/dashboard",exact:!0,component:x}),l.a.createElement(s.a,{path:"/participant",exact:!0,component:U})))}),z=a(95),B=document.getElementById("root");c.a.render(l.a.createElement(z.a,null,l.a.createElement(J,null)),B)}},[[37,2,1]]]);
//# sourceMappingURL=main.a9965102.chunk.js.map